<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cascade: Associations Maintained through Create, Update and Replace Operations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Cascade
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('maintained_associations.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Associations Maintained through Create, Update and Replace Operations</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Cascade methods Create, Update and Replace receive a SuperModel that may have association properties already set. For example, because you previously populated them using the Populate method or option on Get or Query.</p>
<p>Previously, because Cascade uses the immutable model approach where changes return a new instance, those association properties were null on the returned instance. Now, however, their values are "maintained" from input to output. This makes applications more intuitive and less laborious (no need to re-Populate associations you populated in the original Get/Query). In any case, models passed in are not modified, and a new instance is always returned.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
Rules for Maintaining Associations</h2>
<ol type="1">
<li>HasMany and HasOne: association property values are simply copied from incoming model properties to the matching outgoing properties. If they are null on the incoming, they will be null on the outgoing.</li>
<li>BelongsTo and FromBlob: In general, association property values are copied from incoming model properties to the matching outgoing properties. If they are null on the incoming, they will be null on the outgoing.<br  />
 However in the special case that the association property value is no longer correct because their named idProperty/imagePath property has changed, then Populate will be used to set the association correctly. This most commonly occurs when Update modifies the named idProperty. <br  />
</li>
</ol>
<h2><a class="anchor" id="autotoc_md14"></a>
Create Examples</h2>
<div class="fragment"><div class="line">department = <span class="keyword">new</span> Department { <span class="keywordtype">id</span> = 1, name = <span class="stringliteral">&quot;HR&quot;</span> };</div>
<div class="line"> </div>
<div class="line">employee = <span class="keyword">new</span> Employee {</div>
<div class="line">   departmentId = department.id,</div>
<div class="line">   Department = department</div>
<div class="line">};</div>
<div class="line">createdEmployee = await cascade.Create(employee);</div>
<div class="line"><span class="comment">// createdEmployee.Department == department  // maintained</span></div>
<div class="line"><span class="comment">// createdEmployee.Photo == null</span></div>
<div class="line"> </div>
<div class="line">employee = <span class="keyword">new</span> Employee {</div>
<div class="line">   departmentId = department.id,</div>
<div class="line">};</div>
<div class="line">createdEmployee = await cascade.Create(employee);</div>
<div class="line"><span class="comment">// createdEmployee.departmentId == 1</span></div>
<div class="line"><span class="comment">// createdEmployee.Department == null    // not automatically populated</span></div>
<div class="line"> </div>
<div class="line">employee = <span class="keyword">new</span> Employee {</div>
<div class="line">   Department = department</div>
<div class="line">};</div>
<div class="line">createdEmployee = await cascade.Create(employee);</div>
<div class="line"><span class="comment">// createdEmployee.Department == null  // not maintained because departmentId != Department.id </span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md15"></a>
Update Examples</h2>
<div class="fragment"><div class="line">var department1 = <span class="keyword">new</span> Department { <span class="keywordtype">id</span> = 1, name = <span class="stringliteral">&quot;HR&quot;</span> };</div>
<div class="line">var department2 = <span class="keyword">new</span> Department { <span class="keywordtype">id</span> = 2, name = <span class="stringliteral">&quot;Science&quot;</span> };</div>
<div class="line"> </div>
<div class="line">var employee = await cascade.Create(</div>
<div class="line">   <span class="keyword">new</span> Employee {</div>
<div class="line">      departmentId = department.id,</div>
<div class="line">      Department = department</div>
<div class="line">   }</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">updated = await cascade.Update(employee, <span class="keyword">new</span> Dictionary&lt;string, object?&gt; {</div>
<div class="line">  { <span class="stringliteral">&quot;departmentId&quot;</span>, 2 }</div>
<div class="line">});</div>
<div class="line"><span class="comment">// updated.departmentId == 2</span></div>
<div class="line"><span class="comment">// updated.Department == null    // not automatically populated</span></div>
<div class="line"> </div>
<div class="line">updated = await cascade.Update(employee, <span class="keyword">new</span> Dictionary&lt;string, object?&gt; {</div>
<div class="line">  { <span class="stringliteral">&quot;departmentId&quot;</span>, 2 },</div>
<div class="line">  { <span class="stringliteral">&quot;Department&quot;</span>, department2 }</div>
<div class="line">});</div>
<div class="line"><span class="comment">// updated.departmentId == 2</span></div>
<div class="line"><span class="comment">// updated.Department == department2    // maintained</span></div>
<div class="line"> </div>
<div class="line">updated = await cascade.Update(employee, <span class="keyword">new</span> Dictionary&lt;string, object?&gt; {</div>
<div class="line">  { <span class="stringliteral">&quot;departmentId&quot;</span>, 2 },</div>
<div class="line">  { <span class="stringliteral">&quot;Department&quot;</span>, department1 }</div>
<div class="line">});</div>
<div class="line"><span class="comment">// updated.departmentId == 2</span></div>
<div class="line"><span class="comment">// updated.Department == department2    // corrected to match departmentId </span></div>
<div class="line"> </div>
<div class="line">updated = await cascade.Update(employee, <span class="keyword">new</span> Dictionary&lt;string, object?&gt; {</div>
<div class="line">  { <span class="stringliteral">&quot;Department&quot;</span>, department2 }</div>
<div class="line">});</div>
<div class="line"><span class="comment">// updated.Department == null    // not maintained because departmentId == null</span></div>
<div class="line"> </div>
<div class="line">employees = <span class="keyword">new</span> Employee[] {</div>
<div class="line">  <span class="keyword">new</span> Employee { <span class="keywordtype">id</span> = 1, name = <span class="stringliteral">&quot;Fred&quot;</span> },</div>
<div class="line">  <span class="keyword">new</span> Employee { <span class="keywordtype">id</span> = 2, name = <span class="stringliteral">&quot;Sally&quot;</span> }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">updateDepartment = await cascade.Update(department1, <span class="keyword">new</span> Dictionary&lt;string, object?&gt; {</div>
<div class="line">  { <span class="stringliteral">&quot;name&quot;</span>, <span class="stringliteral">&quot;Jane&quot;</span> },</div>
<div class="line">  { <span class="stringliteral">&quot;Employees&quot;</span>, employees },</div>
<div class="line">});</div>
<div class="line"><span class="comment">// updateDepartment.name == &quot;Jane&quot;</span></div>
<div class="line"><span class="comment">// updateDepartment.Employees == employees</span></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
