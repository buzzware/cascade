<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cascade: SuperModel In Depth</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Cascade
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_api__docs_2using__cascade_2in__depth_2supermodel.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">SuperModel In Depth</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md19"></a> </p>
<h1><a class="anchor" id="autotoc_md20"></a>
Normally Immutable</h1>
<p>Much has been written about the benefits of immutable data. The modern language Rust makes parameters, variables etc immutable by default. Of particular benefit with Cascade is that the single current instance per id of each model class can be held in a memory cache and also referenced freely in application data structures without fear of being modified by one part of the application and that affecting other parts. The current instance reflects exactly the state of the server record at the point in time it was sent by the server, without any changes.</p>
<p>All Cascade methods that return models do so with __mutable == False. That means that any attempt to change their properties (properly implemented using GetProperty/SetProperty) will throw a MutationAttemptException.</p>
<h2><a class="anchor" id="autotoc_md21"></a>
Form Editing</h2>
<p>Forms are intended to be implemented using the "editable proxy" feature of SuperModel :</p>
<div class="fragment"><div class="line">var serverThing = Cascade.Get&lt;Thing&gt;(1);</div>
<div class="line"><span class="comment">// serverThing.colour == &quot;red&quot;</span></div>
<div class="line">var editableThing = <span class="keyword">new</span> Thing(serverThing);</div>
<div class="line"><span class="comment">// editableThing.colour == &quot;red&quot;</span></div>
<div class="line">editableThing.colour = <span class="stringliteral">&quot;blue&quot;</span>;</div>
<div class="line"><span class="comment">// editableThing.colour == &quot;blue&quot;</span></div>
<div class="line"><span class="comment">// Dictionary&lt;string,object?&gt; changes = editableThing.__GetChanges();</span></div>
<div class="line"><span class="comment">// changes == { [&quot;colour&quot;] = &quot;blue&quot; }</span></div>
</div><!-- fragment --><p><code>editableThing</code> can be used like any other model in dotnet applications eg. can be bound to UI controls, even with TwoWay binding.</p>
<p>As shown above, __GetChanges() then returns a dictionary of changes to be sent to the server like so :</p>
<div class="fragment"><div class="line">serverThing = await Cascade.Update(serverThing,changes);</div>
<div class="line"><span class="comment">// serverThing.colour == &quot;blue&quot;</span></div>
<div class="line">editableThing = <span class="keyword">new</span> Thing(serverThing);</div>
<div class="line"><span class="comment">// editableThing.colour == &quot;blue&quot;</span></div>
</div><!-- fragment --><p>This means that the data properties of models returned by Cascade remain unmodified from when they arrived from the server.</p>
<h2><a class="anchor" id="autotoc_md22"></a>
Updating Association Properties</h2>
<p>Association properties are treated differently to data properties.</p>
<p>1) Their value is typically derived from their attribute parameters and what they reference, such as foreign and local keys. 2) When they are created as an instance eg. deserialized from a server response or loaded frmo a file based cache association properties are null by default. 3) The <code>Populate()</code> method and <code>populate</code> option on <code>Get()</code> and <code>Query()</code> methods are used to ensure association properties are set or updated as required. 4) An association set on a model instance will remain set, and if that same instance is retrieved later from the memory cache the association will still be set whether it was requested to be populated or not. This cannot be relied on. 5) So if your application code requires an association to be set, <b>you must request it to be populated to be sure that it is</b>, and <b>don't be surprised if it is already populated when you did not ask for it to be</b>. <br  />
 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
